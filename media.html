<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Orem High School Bands Gallery</title>
  <meta name="description" content="Orem High School Bands — Photo Gallery showcasing performances, concerts, and band activities." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Open+Sans:wght@400;600&family=Poppins:wght@600;700&family=Playfair+Display:wght@700&family=Cormorant+Garamond:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a href="index.html" class="brand" aria-label="Orem High School Bands">
        <img src="Images/BandLogo.png" alt="Orem Tiger Bands logo" class="logo">
      </a>
      <button id="navToggle" class="nav-toggle" aria-controls="mainNav" aria-expanded="false">
        <span class="hamburger"></span>
        <span class="sr-only">Menu</span>
      </button>
      <nav id="mainNav" class="main-nav" aria-label="Primary navigation">
        <ul>
          <li><a href="index.html">Home</a></li>
          <li class="dropdown">
            <button class="dropdown-toggle" aria-haspopup="true" aria-expanded="false" aria-controls="dropdown-menu" tabindex="0" style="background:none;border:none;padding:8px 16px;font:inherit;color:inherit;">Ensembles</button>
            <ul class="dropdown-menu" id="dropdown-menu" aria-label="Ensembles submenu" hidden>
              <li><a href="ensembles/concert-bands.html">Concert Bands</a></li>
              <li><a href="ensembles/marching-band.html">Marching Bands</a></li>
              <li><a href="ensembles/orchestra.html">Orchestra</a></li>
              <li><a href="ensembles/jazz-bands.html">Jazz</a></li>
              <li><a href="ensembles/percussion.html">Percussion</a></li>
            </ul>
          </li>
          <li><a href="calendar.html">Calendar</a></li>
          <li><a href="media.html">Media</a></li>
          <li><a href="director.html">Director</a></li>
          <li><a href="boosters.html">Boosters</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
        <a class="cta" href="contact.html">Join the Band</a>
      </nav>
    </div>
  </header>
  <main>
    <section class="gallery-section">
      <div class="container">
        <h1>Orem High School Bands Gallery</h1>
        <p class="gallery-subtitle">Photos and videos from performances, concerts, and band activities</p>
      </div>
      <div class="gallery-grid-container" x-data="galleryApp()">
        <div class="gallery-grid" role="region" aria-label="Image gallery">
          <template x-for="(image, index) in images" :key="index">
            <div class="gallery-grid-item"
                 x-ref="item"
                 x-init="observeImage($el, index)"
                 @click="openModal(index)"
                 role="button"
                 tabindex="0"
                 @keydown.enter="openModal(index)"
                 @keydown.space.prevent="openModal(index)">
              <div class="gallery-grid-image-wrapper">
                <img 
                  :src="image.visible ? image.src : ''"
                  :alt="image.alt"
                  :data-src="image.src"
                  :style="`opacity: ${image.loaded ? 1 : 0}; transition: opacity 0.4s ease-in-out;`"
                  @load="loadImage(index)"
                  loading="lazy"
                  class="gallery-grid-image">
                <div class="gallery-grid-overlay">
                  <div class="gallery-grid-info">
                    <h3 x-text="image.title"></h3>
                    <p x-text="image.description"></p>
                  </div>
                </div>
              </div>
            </div>
          </template>
        </div>
        
        <!-- Modal Lightbox -->
        <div x-show="modalOpen"
             x-transition:enter="transition ease-out duration-300"
             x-transition:enter-start="opacity-0"
             x-transition:enter-end="opacity-100"
             x-transition:leave="transition ease-in duration-200"
             x-transition:leave-start="opacity-100"
             x-transition:leave-end="opacity-0"
             @click.self="closeModal()"
             class="gallery-modal"
             x-cloak
             role="dialog"
             aria-modal="true"
             :aria-label="selectedImage ? selectedImage.alt : 'Image viewer'">
          <div class="gallery-modal-content"
               x-transition:enter="transition ease-out duration-300"
               x-transition:enter-start="opacity-0 scale-95"
               x-transition:enter-end="opacity-100 scale-100"
               x-transition:leave="transition ease-in duration-200"
               x-transition:leave-start="opacity-100 scale-100"
               x-transition:leave-end="opacity-0 scale-95">
            <button @click="closeModal()"
                    class="gallery-modal-close"
                    aria-label="Close modal">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <path d="M18 6L6 18M6 6l12 12"/>
              </svg>
            </button>
            <div class="gallery-modal-media" x-show="selectedImage">
              <img x-show="selectedImage && !isVideo(selectedImage.src)"
                   :src="selectedImage?.src"
                   :alt="selectedImage?.alt"
                   class="gallery-modal-image">
              <video x-show="selectedImage && isVideo(selectedImage.src)"
                     :src="selectedImage?.src"
                     controls
                     class="gallery-modal-video">
                Your browser does not support the video tag.
              </video>
              <div class="gallery-modal-info" x-show="selectedImage">
                <h3 x-text="selectedImage?.title"></h3>
                <p x-text="selectedImage?.description"></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
  <footer class="site-footer">
    <div class="container footer-inner">
      <div class="footer-left">
        <strong>Orem High School Bands</strong>
        <address>175 South 400 West, Orem, UT 84058</address>
        <a href="mailto:ckwinters@alpinedistrict.org">ckwinters@alpinedistrict.org</a>
      </div>
      <div class="footer-right">
        <nav class="footer-nav" aria-label="Footer">
          <a href="media.html">Media</a>
          <a href="calendar.html">Calendar</a>
          <a href="contact.html">Contact</a>
        </nav>
        <div class="socials">
          <a href="#" aria-label="Instagram">Instagram</a>
          <a href="#" aria-label="Facebook">Facebook</a>
          <a href="#" aria-label="YouTube">YouTube</a>
        </div>
      </div>
    </div>
    <div class="footer-bottom">
      <small>© 2025 Orem High School Bands. All Rights Reserved.</small>
    </div>
  </footer>
  <!-- Alpine.js -->
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <!-- Supabase JS Library -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    // Ensure Supabase is accessible globally
    // The library may expose createClient directly or via window.supabase
    if (typeof createClient === 'undefined' && typeof window.supabase !== 'undefined') {
      // If window.supabase exists but createClient doesn't, extract it
      if (window.supabase.createClient) {
        window.createClient = window.supabase.createClient.bind(window.supabase);
      }
    }
  </script>
  <script src="main.js"></script>
  <script src="ohsgallery_app.js"></script>
</body>
</html>


